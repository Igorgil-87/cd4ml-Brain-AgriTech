{% extends "base_playground.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/penalizacao.css') }}">
<div class="playground-container">
  <h2>Estimativa de Penalização de Produtividade</h2>
  <p class="api-description">Calcula o impacto de penalizações ambientais na produtividade agrícola da área informada.</p>

  <h3>Entrada</h3>
  <form method="POST">
    <label>Área do imóvel (ha):</label>
    <input type="number" step="any" name="area_imovel" required>

    <label>Área embargada (ha):</label>
    <input type="number" step="any" name="area_embargada" required>

    <label>Produtividade esperada (t/ha):</label>
    <input type="number" step="any" name="produtividade_esperada" required>

    <button type="submit">Calcular Penalização</button>
  </form>

  {% if prediction %}
    <h3>Resultado</h3>
    <p><strong>Redução estimada:</strong> {{ prediction }} toneladas</p>
  {% endif %}

  <hr>
  <h3>Documentação da API</h3>
  <p><strong>Endpoint:</strong> <code>POST /penalizacao</code></p>
  <p><strong>Content-Type:</strong> <code>application/x-www-form-urlencoded</code></p>

  <h4>Parâmetros</h4>
  <ul>
    <li><code>area_imovel</code>: float - Área total do imóvel rural</li>
    <li><code>area_embargada</code>: float - Área sob embargo ambiental</li>
    <li><code>produtividade_esperada</code>: float - Produtividade agrícola esperada</li>
  </ul>

  <h4>API Key</h4>
  <p>Sua chave: <code>{{ api_key or 'SUA_CHAVE_AQUI' }}</code></p>

  <h4>Exemplo</h4>
  <pre><code>import requests

requests.post(
    "http://localhost:11001/penalizacao",
    data={
        "area_imovel": 120.0,
        "area_embargada": 20.0,
        "produtividade_esperada": 3.5
    },
    headers={"X-API-Key": "SUA_CHAVE_AQUI"}
)</code></pre>
</div>
{% endblock %}