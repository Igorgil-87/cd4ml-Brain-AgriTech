{% extends "base_playground.html" %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/playground.css') }}">

<div class="api-playground">
  <header>
    <h1>ğŸŒ¤ï¸ API de Clima</h1>
    <p class="description">PrevisÃ£o de condiÃ§Ãµes climÃ¡ticas para lavouras a partir dos dados inseridos.</p>
  </header>

  <section class="api-section">
    <h2>Entrada de Dados</h2>
    <form method="POST" class="api-form">
      <label>ğŸŒ¡ï¸ Temperatura MÃ©dia (Â°C)</label>
      <input type="number" step="any" name="temperatura_media" required>

      <label>ğŸŒ§ï¸ PrecipitaÃ§Ã£o (mm)</label>
      <input type="number" step="any" name="precipitacao" required>

      <label>ğŸ’§ Umidade Relativa (%)</label>
      <input type="number" step="any" name="umidade" required>

      <button type="submit">ğŸš€ Executar Modelo</button>
    </form>
  </section>

  {% if prediction %}
  <section class="api-result">
    <h2>Resultado</h2>
    <p><strong>PrediÃ§Ã£o:</strong> {{ prediction }}</p>
  </section>
  {% endif %}

  <section class="api-doc">
    <h2>ğŸ“š DocumentaÃ§Ã£o da API</h2>
    <p><strong>Endpoint:</strong> <code>POST /climatica</code></p>
    <p><strong>Content-Type:</strong> <code>application/x-www-form-urlencoded</code></p>

    <h3>ParÃ¢metros</h3>
    <ul>
      <li><code>temperatura_media</code> â€“ Temperatura mÃ©dia esperada</li>
      <li><code>precipitacao</code> â€“ Volume de chuva em milÃ­metros</li>
      <li><code>umidade</code> â€“ Umidade relativa do ar em porcentagem</li>
    </ul>

    <h3>API Key</h3>
    <p>Utilize sua chave de acesso: <code>{{ api_key or 'SUA_CHAVE_AQUI' }}</code></p>

    <h3>Exemplo de Chamada (Python)</h3>
    <pre><code>import requests

response = requests.post(
    "http://localhost:11001/climatica",
    data={
        "temperatura_media": 26.4,
        "precipitacao": 12.3,
        "umidade": 75
    },
    headers={"X-API-Key": "SUA_CHAVE_AQUI"}
)
print(response.json())</code></pre>
  </section>
</div>

{% endblock %}